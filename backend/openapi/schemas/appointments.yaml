Appointment:
  type: object
  required:
    - id
    - titel
    - termin_datum
    - termin_zeit
    - status
  properties:
    id:
      type: integer
      description: Appointment ID (auto-generated)
    titel:
      type: string
      description: Appointment title
    kunde_id:
      type: integer
      nullable: true
      description: ID of the associated customer
    kunde_name:
      type: string
      description: Name of the associated customer
    projekt_id:
      type: integer
      nullable: true
      description: ID of the associated project
    projekt_titel:
      type: string
      description: Title of the associated project
    termin_datum:
      type: string
      format: date
      description: Appointment date (YYYY-MM-DD)
    dateFormatted:
      type: string
      description: Formatted date string (dd.MM.yyyy)
    termin_zeit:
      type: string
      pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
      description: Appointment time (HH:MM)
    timeFormatted:
      type: string
      description: Formatted time string (HH:mm)
    dauer:
      type: integer
      default: 60
      description: Duration in minutes
    ort:
      type: string
      nullable: true
      description: Appointment location
    beschreibung:
      type: string
      nullable: true
      description: Appointment description
    status:
      type: string
      enum: [geplant, bestaetigt, abgeschlossen, storniert]
      description: Appointment status
    statusLabel:
      type: string
      description: Formatted status label
    statusClass:
      type: string
      description: CSS class for status
    created_at:
      type: string
      format: date-time
      description: Creation timestamp
    updated_at:
      type: string
      format: date-time
      description: Last update timestamp

AppointmentCreate:
  type: object
  required:
    - titel
    - termin_datum
    - termin_zeit
  properties:
    titel:
      type: string
      description: Appointment title
      minLength: 2
      maxLength: 200
    kunde_id:
      type: integer
      nullable: true
      description: Customer ID
    projekt_id:
      type: integer
      nullable: true
      description: Project ID
    termin_datum:
      type: string
      format: date
      description: Appointment date (YYYY-MM-DD)
    termin_zeit:
      type: string
      pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
      description: Appointment time (HH:MM)
    dauer:
      type: integer
      default: 60
      description: Duration in minutes
      minimum: 1
    ort:
      type: string
      nullable: true
      description: Appointment location
      maxLength: 200
    beschreibung:
      type: string
      nullable: true
      description: Appointment description
      maxLength: 2000
    status:
      type: string
      enum: [geplant, bestaetigt, abgeschlossen, storniert]
      default: geplant
      description: Appointment status

AppointmentUpdate:
  type: object
  properties:
    titel:
      type: string
      description: Appointment title
      minLength: 2
      maxLength: 200
    kunde_id:
      type: integer
      nullable: true
      description: Customer ID
    projekt_id:
      type: integer
      nullable: true
      description: Project ID
    termin_datum:
      type: string
      format: date
      description: Appointment date (YYYY-MM-DD)
    termin_zeit:
      type: string
      pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
      description: Appointment time (HH:MM)
    dauer:
      type: integer
      description: Duration in minutes
      minimum: 1
    ort:
      type: string
      nullable: true
      description: Appointment location
      maxLength: 200
    beschreibung:
      type: string
      nullable: true
      description: Appointment description
      maxLength: 2000
    status:
      type: string
      enum: [geplant, bestaetigt, abgeschlossen, storniert]
      description: Appointment status

AppointmentStatusUpdate:
  type: object
  required:
    - status
  properties:
    status:
      type: string
      enum: [geplant, bestaetigt, abgeschlossen, storniert]
      description: New appointment status
    note:
      type: string
      description: Optional note about the status change
      maxLength: 1000

AppointmentNote:
  type: object
  required:
    - note
  properties:
    note:
      type: string
      description: Note text
      minLength: 1
      maxLength: 1000

AppointmentWithDetails:
  allOf:
    - $ref: '#/Appointment'
    - type: object
      properties:
        notes:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              text:
                type: string
              userName:
                type: string
              formattedDate:
                type: string
              createdAt:
                type: string
                format: date-time
        customer:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
            email:
              type: string
        project:
          type: object
          properties:
            id:
              type: integer
            title:
              type: string
            status:
              type: string