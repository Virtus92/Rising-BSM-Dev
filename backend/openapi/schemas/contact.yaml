ContactRequest:
  type: object
  required:
    - name
    - email
    - service
    - message
  properties:
    id:
      type: integer
      description: Request ID (auto-generated)
    name:
      type: string
      description: Contact name
      minLength: 2
      maxLength: 100
    email:
      type: string
      format: email
      description: Contact email
    phone:
      type: string
      description: Contact phone number
      maxLength: 30
      nullable: true
    service:
      type: string
      enum: [facility, moving, winter, other]
      description: Requested service type
    message:
      type: string
      description: Request message
      minLength: 10
      maxLength: 2000
    status:
      type: string
      enum: [neu, in_bearbeitung, beantwortet, geschlossen]
      default: neu
      description: Request status
    processorId:
      type: integer
      description: ID of the user processing the request
      nullable: true
    ipAddress:
      type: string
      description: IP address of submitter
      nullable: true
    createdAt:
      type: string
      format: date-time
      description: Timestamp of request creation
    updatedAt:
      type: string
      format: date-time
      description: Timestamp of last update

ContactRequestCreate:
  type: object
  required:
    - name
    - email
    - service
    - message
  properties:
    name:
      type: string
      description: Contact name
      minLength: 2
      maxLength: 100
    email:
      type: string
      format: email
      description: Contact email
    phone:
      type: string
      description: Contact phone number
      maxLength: 30
      nullable: true
    service:
      type: string
      enum: [facility, moving, winter, other]
      description: Requested service type
    message:
      type: string
      description: Request message
      minLength: 10
      maxLength: 2000
    ipAddress:
      type: string
      description: IP address of submitter
      nullable: true

ContactRequestUpdate:
  type: object
  properties:
    status:
      type: string
      enum: [neu, in_bearbeitung, beantwortet, geschlossen]
      description: Request status
    processorId:
      type: integer
      description: ID of the user processing the request
      nullable: true

ContactRequestNote:
  type: object
  required:
    - note
  properties:
    note:
      type: string
      description: Note text
      minLength: 1
      maxLength: 1000

ContactRequestFilter:
  type: object
  properties:
    status:
      type: string
      enum: [neu, in_bearbeitung, beantwortet, geschlossen]
      description: Filter by status
    service:
      type: string
      enum: [facility, moving, winter, other]
      description: Filter by service type
    search:
      type: string
      description: Search term for name, email or message
    dateFrom:
      type: string
      format: date
      description: Filter by creation date (from)
    dateTo:
      type: string
      format: date
      description: Filter by creation date (to)
    page:
      type: integer
      default: 1
      description: Page number (1-based)
    limit:
      type: integer
      default: 20
      maximum: 100
      description: Items per page
    sortBy:
      type: string
      enum: [createdAt, name, email, status, service]
      default: createdAt
      description: Field to sort by
    sortDirection:
      type: string
      enum: [asc, desc]
      default: desc
      description: Sort direction

ContactRequestWithDetails:
  allOf:
    - $ref: '#/ContactRequest'
    - type: object
      properties:
        processor:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
        notes:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              text:
                type: string
              userName:
                type: string
              formattedDate:
                type: string
              createdAt:
                type: string
                format: date-time

ContactRequestStatistics:
  type: object
  properties:
    total:
      type: integer
      description: Total number of requests
    statusCounts:
      type: object
      properties:
        neu:
          type: integer
        in_bearbeitung:
          type: integer
        beantwortet:
          type: integer
        geschlossen:
          type: integer
    byService:
      type: object
      properties:
        facility:
          type: integer
        moving:
          type: integer
        winter:
          type: integer
        other:
          type: integer
    monthly:
      type: array
      items:
        type: object
        properties:
          month:
            type: string
          count:
            type: integer