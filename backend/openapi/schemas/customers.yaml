Customer:
  type: object
  required:
    - id
    - name
    - status
    - type
    - country
    - newsletter
    - createdAt
    - updatedAt
  properties:
    id:
      type: integer
      description: Customer ID (auto-generated)
    name:
      type: string
      description: Customer name
    company:
      type: string
      nullable: true
      description: Company name
    email:
      type: string
      format: email
      description: Customer email address
      nullable: true
    phone:
      type: string
      nullable: true
      description: Phone number
    address:
      type: string
      nullable: true
      description: Street address
    postalCode:
      type: string
      nullable: true
      description: Postal code
    city:
      type: string
      nullable: true
      description: City
    country:
      type: string
      description: Country (defaults to Austria)
    notes:
      type: string
      nullable: true
      description: Notes about the customer
    newsletter:
      type: boolean
      description: Newsletter subscription status
    status:
      type: string
      enum: [active, inactive, deleted]
      description: Customer status
    type:
      type: string
      enum: [private, business]
      description: Customer type
    createdAt:
      type: string
      format: date-time
      description: Timestamp of customer creation
    updatedAt:
      type: string
      format: date-time
      description: Timestamp of last update

CustomerCreate:
  type: object
  required:
    - name
    - email
  properties:
    name:
      type: string
      description: Customer name
      minLength: 2
      maxLength: 100
    company:
      type: string
      description: Company name
      maxLength: 100
      nullable: true
    email:
      type: string
      format: email
      description: Customer email address
    phone:
      type: string
      description: Phone number
      maxLength: 30
      nullable: true
    address:
      type: string
      description: Street address
      maxLength: 200
      nullable: true
    postalCode:
      type: string
      description: Postal code
      maxLength: 10
      nullable: true
    city:
      type: string
      description: City
      maxLength: 100
      nullable: true
    country:
      type: string
      description: Country
      maxLength: 100
      nullable: true
      default: "Austria"
    notes:
      type: string
      description: Notes about the customer
      maxLength: 2000
      nullable: true
    newsletter:
      type: boolean
      description: Newsletter subscription status
      default: false
    status:
      type: string
      enum: [active, inactive, deleted]
      default: active
      description: Customer status
    type:
      type: string
      enum: [private, business]
      default: private
      description: Customer type

CustomerUpdate:
  type: object
  properties:
    name:
      type: string
      description: Customer name
      minLength: 2
      maxLength: 100
    company:
      type: string
      description: Company name
      maxLength: 100
      nullable: true
    email:
      type: string
      format: email
      description: Customer email address
    phone:
      type: string
      description: Phone number
      maxLength: 30
      nullable: true
    address:
      type: string
      description: Street address
      maxLength: 200
      nullable: true
    postalCode:
      type: string
      description: Postal code
      maxLength: 10
      nullable: true
    city:
      type: string
      description: City
      maxLength: 100
      nullable: true
    country:
      type: string
      description: Country
      maxLength: 100
      nullable: true
    notes:
      type: string
      description: Notes about the customer
      maxLength: 2000
      nullable: true
    newsletter:
      type: boolean
      description: Newsletter subscription status
    status:
      type: string
      enum: [active, inactive, deleted]
      description: Customer status
    type:
      type: string
      enum: [private, business]
      description: Customer type

CustomerStatusUpdate:
  type: object
  required:
    - status
  properties:
    status:
      type: string
      enum: [active, inactive, deleted]
      description: New customer status
    note:
      type: string
      description: Optional note about the status change
      maxLength: 1000

CustomerNote:
  type: object
  required:
    - text
  properties:
    text:
      type: string
      description: Note text
      minLength: 1
      maxLength: 1000

CustomerWithDetails:
  allOf:
    - $ref: '#/Customer'
    - type: object
      properties:
        projects:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              title:
                type: string
              startDate:
                type: string
                format: date
              status:
                type: string
        appointments:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              title:
                type: string
              appointmentDate:
                type: string
                format: date
              status:
                type: string
        notes:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              text:
                type: string
              userName:
                type: string
              createdAt:
                type: string
                format: date-time

CustomerStatistics:
  type: object
  properties:
    total:
      type: integer
      description: Total number of customers
    byStatus:
      type: object
      additionalProperties:
        type: integer
      example:
        active: 120
        inactive: 30
        deleted: 5
    byType:
      type: object
      additionalProperties:
        type: integer
      example:
        private: 87
        business: 68
    trend:
      type: object
      properties:
        thisMonth:
          type: integer
          description: New customers in current month
        lastMonth:
          type: integer
          description: New customers in previous month
        growthRate:
          type: number
          format: float
          description: Growth rate percentage

CustomerInsights:
  type: object
  properties:
    customer:
      $ref: '#/Customer'
    projectStats:
      type: object
      properties:
        total:
          type: integer
        byStatus:
          type: object
          additionalProperties:
            type: integer
    appointmentStats:
      type: object
      properties:
        total:
          type: integer
        upcoming:
          type: integer
    financials:
      type: object
      properties:
        totalRevenue:
          type: string
        averageProjectValue:
          type: string
    activity:
      type: object
      properties:
        recent:
          type: array
          items:
            type: object
            properties:
              action:
                type: string
              date:
                type: string
              by:
                type: string
              details:
                type: string
        lastUpdate:
          type: string

CustomerHistoryItem:
  type: object
  properties:
    id:
      type: integer
    action:
      type: string
    timestamp:
      type: string
    relativeTime:
      type: string
    user:
      type: string
    details:
      type: string