</main>
</div>

<script>
  // Helper function to get CSRF token
  function getCsrfToken() {
    // Try to get token from meta tag first
    const metaToken = document.querySelector('meta[name="csrf-token"]');
    if (metaToken) {
      return metaToken.getAttribute('content');
    }
    
    // Fall back to getting from a form input if available
    const tokenInput = document.querySelector('input[name="_csrf"]');
    if (tokenInput) {
      return tokenInput.value;
    }
    
    console.error('CSRF token not found. API requests may fail.');
    return '';
  }
</script>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Bootstrap Bundle mit Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- DataTables JS - nur laden, wenn Tabellen vorhanden sind -->
<% if (typeof dataTablesNeeded === 'undefined' || dataTablesNeeded !== false) { %>
  <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
<% } %>

<!-- Dashboard Core JS - mit Lazy Loading -->

<script src="/scripts/dashboard.js" defer></script>

<!-- Page Specific Scripts -->
<% if (typeof pageScripts !== 'undefined') { %>
  <%= pageScripts %>
<% } %>
</body>
</html>