Appointment:
  type: object
  required:
    - id
    - title
    - appointmentDate
    - appointmentTime
    - status
  properties:
    id:
      type: integer
      description: Appointment ID (auto-generated)
    title:
      type: string
      description: Appointment title
    customerId:
      type: integer
      nullable: true
      description: ID of the associated customer
    customerName:
      type: string
      description: Name of the associated customer
    projectId:
      type: integer
      nullable: true
      description: ID of the associated project
    projectTitle:
      type: string
      description: Title of the associated project
    appointmentDate:
      type: string
      format: date
      description: Appointment date (YYYY-MM-DD)
    dateFormatted:
      type: string
      description: Formatted date string (dd.MM.yyyy)
    appointmentTime:
      type: string
      pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
      description: Appointment time (HH:MM)
    timeFormatted:
      type: string
      description: Formatted time string (HH:mm)
    duration:
      type: integer
      default: 60
      description: Duration in minutes
    location:
      type: string
      nullable: true
      description: Appointment location
    description:
      type: string
      nullable: true
      description: Appointment description
    status:
      type: string
      enum: [planned, confirmed, completed, canceled]
      description: Appointment status
    statusLabel:
      type: string
      description: Formatted status label
    statusClass:
      type: string
      description: CSS class for status
    createdAt:
      type: string
      format: date-time
      description: Creation timestamp
    updatedAt:
      type: string
      format: date-time
      description: Last update timestamp

AppointmentCreate:
  type: object
  required:
    - title
    - appointmentDate
    - appointmentTime
  properties:
    title:
      type: string
      description: Appointment title
      minLength: 2
      maxLength: 200
    customerId:
      type: integer
      nullable: true
      description: Customer ID
    projectId:
      type: integer
      nullable: true
      description: Project ID
    appointmentDate:
      type: string
      format: date
      description: Appointment date (YYYY-MM-DD)
    appointmentTime:
      type: string
      pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
      description: Appointment time (HH:MM)
    duration:
      type: integer
      default: 60
      description: Duration in minutes
      minimum: 1
    location:
      type: string
      nullable: true
      description: Appointment location
      maxLength: 200
    description:
      type: string
      nullable: true
      description: Appointment description
      maxLength: 2000
    status:
      type: string
      enum: [planned, confirmed, completed, canceled]
      default: planned
      description: Appointment status

AppointmentUpdate:
  type: object
  properties:
    title:
      type: string
      description: Appointment title
      minLength: 2
      maxLength: 200
    customerId:
      type: integer
      nullable: true
      description: Customer ID
    projectId:
      type: integer
      nullable: true
      description: Project ID
    appointmentDate:
      type: string
      format: date
      description: Appointment date (YYYY-MM-DD)
    appointmentTime:
      type: string
      pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
      description: Appointment time (HH:MM)
    duration:
      type: integer
      description: Duration in minutes
      minimum: 1
    location:
      type: string
      nullable: true
      description: Appointment location
      maxLength: 200
    description:
      type: string
      nullable: true
      description: Appointment description
      maxLength: 2000
    status:
      type: string
      enum: [planned, confirmed, completed, canceled]
      description: Appointment status

AppointmentStatusUpdate:
  type: object
  required:
    - status
  properties:
    status:
      type: string
      enum: [planned, confirmed, completed, canceled]
      description: New appointment status
    note:
      type: string
      description: Optional note about the status change
      maxLength: 1000

AppointmentNote:
  type: object
  required:
    - note
  properties:
    note:
      type: string
      description: Note text
      minLength: 1
      maxLength: 1000

AppointmentWithDetails:
  allOf:
    - $ref: '#/Appointment'
    - type: object
      properties:
        notes:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              note:
                type: string
              userId:
                type: integer
              userName:
                type: string
              formattedDate:
                type: string
              createdAt:
                type: string
                format: date-time
        customer:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
            email:
              type: string
        project:
          type: object
          properties:
            id:
              type: integer
            title:
              type: string
            status:
              type: string